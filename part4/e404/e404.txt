Events:
  Type     Reason                Age   From                 Message
  ----     ------                ----  ----                 -------
  Normal   NewReplicaSetCreated  58m   rollouts-controller  Created ReplicaSet proj01-dep-758f7bdc88 (revision 1)
  Normal   ScalingReplicaSet     58m   rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 0 to 4
  Normal   RolloutCompleted      58m   rollouts-controller  Rollout completed update to revision 1 (758f7bdc88): Initial deploy
  Normal   RolloutUpdated        58m   rollouts-controller  Rollout updated to revision 1
  Normal   ScalingReplicaSet     25m   rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 4 to 3
  Normal   RolloutUpdated        25m   rollouts-controller  Rollout updated to revision 2
  Normal   NewReplicaSetCreated  25m   rollouts-controller  Created ReplicaSet proj01-dep-768df8d8ff (revision 2)
  Normal   ScalingReplicaSet     25m   rollouts-controller  Scaled up ReplicaSet proj01-dep-768df8d8ff (revision 2) from 0 to 2
  Normal   AnalysisRunRunning    25m   rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Running' Previous: ''
  Normal   RolloutStepCompleted  25m   rollouts-controller  Rollout step 1/2 completed (setWeight: 50)
  Normal   ScalingReplicaSet     25m   rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 2
  Warning  AnalysisRunFailed     23m   rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Failed' Previous: 'Running'
  Warning  RolloutAborted        23m   rollouts-controller  Rollout aborted update to revision 2: Metric "cpu-rate" assessed Failed due to failed (1) > failureLimit (0)
  Normal   ScalingReplicaSet     23m   rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 2 to 3
  Normal   ScalingReplicaSet     23m   rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 2 to 1
  Normal   ScalingReplicaSet     23m   rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 4
  Normal   ScalingReplicaSet     22m   rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 1 to 0
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d17h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
proj01-dep-758f7bdc88-nd4bk    1/1     Running     0             59m
proj01-dep-758f7bdc88-gnpsg    1/1     Running     0             59m
daily-todo-27680400--1-fbxdz   0/1     Completed   0             39m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             33m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             33m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             33m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             33m
proj01-dep-758f7bdc88-dcsch    1/1     Running     0             23m
proj01-dep-758f7bdc88-cbdp8    1/1     Running     0             23m
rvl@eb: Project $ kubectl apply -k manifests/default/
namespace/project unchanged
service/postgres-svc unchanged
service/proj01-svc unchanged
service/proj02-svc unchanged
persistentvolumeclaim/share-claim unchanged
statefulset.apps/postgres-ss configured
cronjob.batch/daily-todo unchanged
analysistemplate.argoproj.io/cpu-rate configured
rollout.argoproj.io/proj01-dep configured
rollout.argoproj.io/proj02-dep unchanged
ingress.networking.k8s.io/prj-back-ingress unchanged
ingress.networking.k8s.io/prj-front-ingress unchanged
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d17h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
proj01-dep-758f7bdc88-nd4bk    1/1     Running     0             59m
proj01-dep-758f7bdc88-gnpsg    1/1     Running     0             59m
daily-todo-27680400--1-fbxdz   0/1     Completed   0             40m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             33m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             33m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             33m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             33m
proj01-dep-758f7bdc88-cbdp8    1/1     Running     0             24m
proj01-dep-745f85cffc-cl9ff    0/1     Running     0             9s
proj01-dep-745f85cffc-cgnvd    0/1     Running     0             9s
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d17h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
proj01-dep-758f7bdc88-nd4bk    1/1     Running     0             60m
proj01-dep-758f7bdc88-gnpsg    1/1     Running     0             60m
daily-todo-27680400--1-fbxdz   0/1     Completed   0             40m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             34m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             34m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             34m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             34m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             37s
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             37s
rvl@eb: Project $ kubectl describe rollouts
Name:         proj02-dep
Namespace:    project
Labels:       <none>
Annotations:  rollout.argoproj.io/revision: 1
API Version:  argoproj.io/v1alpha1
Kind:         Rollout
Metadata:
  Creation Timestamp:  2022-08-18T12:06:14Z
  Generation:          1
  Managed Fields:
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:rollout.argoproj.io/revision:
    Manager:      Go-http-client
    Operation:    Update
    Time:         2022-08-18T12:06:14Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .:
          f:kubectl.kubernetes.io/last-applied-configuration:
      f:spec:
        .:
        f:replicas:
        f:selector:
          .:
          f:matchLabels:
            .:
            f:app:
        f:strategy:
          .:
          f:canary:
            .:
            f:steps:
        f:template:
          .:
          f:metadata:
            .:
            f:labels:
              .:
              f:app:
          f:spec:
            .:
            f:containers:
    Manager:      kubectl-client-side-apply
    Operation:    Update
    Time:         2022-08-18T12:06:14Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:status:
        .:
        f:HPAReplicas:
        f:availableReplicas:
        f:blueGreen:
        f:canary:
        f:conditions:
        f:currentPodHash:
        f:currentStepHash:
        f:currentStepIndex:
        f:observedGeneration:
        f:phase:
        f:readyReplicas:
        f:replicas:
        f:selector:
        f:stableRS:
        f:updatedReplicas:
    Manager:         Go-http-client
    Operation:       Update
    Subresource:     status
    Time:            2022-08-18T12:06:34Z
  Resource Version:  1282520
  UID:               df3656dd-97d3-4a22-87a9-f08c7bf757af
Spec:
  Replicas:  4
  Selector:
    Match Labels:
      App:  proj02
  Strategy:
    Canary:
      Steps:
        Set Weight:  25
        Pause:
          Duration:  30s
        Set Weight:  50
        Pause:
          Duration:  30s
  Template:
    Metadata:
      Labels:
        App:  proj02
    Spec:
      Containers:
        Image:              rvlq/proj-front:2bf3fbe6733021c07515c1e81792c1f60e151a7f
        Image Pull Policy:  Always
        Name:               proj02
        Readiness Probe:
          Http Get:
            Path:                 /
            Port:                 80
          Initial Delay Seconds:  5
          Period Seconds:         10
        Resources:
          Limits:
            Cpu:     500m
            Memory:  256Mi
Status:
  HPA Replicas:        4
  Available Replicas:  4
  Blue Green:
  Canary:
  Conditions:
    Last Transition Time:  2022-08-18T12:06:34Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               RolloutCompleted
    Reason:                RolloutCompleted
    Status:                True
    Type:                  Completed
    Last Transition Time:  2022-08-18T12:06:14Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               ReplicaSet "proj02-dep-cd996b9f6" has successfully progressed.
    Reason:                NewReplicaSetAvailable
    Status:                True
    Type:                  Progressing
    Last Transition Time:  2022-08-18T12:06:34Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               Rollout has minimum availability
    Reason:                AvailableReason
    Status:                True
    Type:                  Available
  Current Pod Hash:        cd996b9f6
  Current Step Hash:       567497cc4f
  Current Step Index:      4
  Observed Generation:     1
  Phase:                   Healthy
  Ready Replicas:          4
  Replicas:                4
  Selector:                app=proj02
  Stable RS:               cd996b9f6
  Updated Replicas:        4
Events:
  Type    Reason                Age   From                 Message
  ----    ------                ----  ----                 -------
  Normal  RolloutUpdated        34m   rollouts-controller  Rollout updated to revision 1
  Normal  NewReplicaSetCreated  34m   rollouts-controller  Created ReplicaSet proj02-dep-cd996b9f6 (revision 1)
  Normal  ScalingReplicaSet     34m   rollouts-controller  Scaled up ReplicaSet proj02-dep-cd996b9f6 (revision 1) from 0 to 4
  Normal  RolloutCompleted      34m   rollouts-controller  Rollout completed update to revision 1 (cd996b9f6): Initial deploy


Name:         proj01-dep
Namespace:    project
Labels:       <none>
Annotations:  rollout.argoproj.io/revision: 3
API Version:  argoproj.io/v1alpha1
Kind:         Rollout
Metadata:
  Creation Timestamp:  2022-08-18T11:36:32Z
  Generation:          4
  Managed Fields:
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:rollout.argoproj.io/revision:
    Manager:      Go-http-client
    Operation:    Update
    Time:         2022-08-18T11:40:15Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .:
          f:kubectl.kubernetes.io/last-applied-configuration:
      f:spec:
        .:
        f:replicas:
        f:selector:
          .:
          f:matchLabels:
            .:
            f:app:
        f:strategy:
          .:
          f:canary:
            .:
            f:steps:
        f:template:
          .:
          f:metadata:
            .:
            f:labels:
              .:
              f:app:
          f:spec:
            .:
            f:containers:
            f:volumes:
    Manager:      kubectl-client-side-apply
    Operation:    Update
    Time:         2022-08-18T11:40:15Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:status:
        .:
        f:HPAReplicas:
        f:availableReplicas:
        f:blueGreen:
        f:canary:
          .:
          f:currentStepAnalysisRunStatus:
            .:
            f:name:
            f:status:
        f:conditions:
        f:currentPodHash:
        f:currentStepHash:
        f:currentStepIndex:
        f:message:
        f:observedGeneration:
        f:phase:
        f:readyReplicas:
        f:replicas:
        f:selector:
        f:stableRS:
        f:updatedReplicas:
    Manager:         Go-http-client
    Operation:       Update
    Subresource:     status
    Time:            2022-08-18T12:40:20Z
  Resource Version:  1284608
  UID:               379b830b-6f63-4fec-b985-616b8ab6b7c8
Spec:
  Replicas:  4
  Selector:
    Match Labels:
      App:  proj01
  Strategy:
    Canary:
      Steps:
        Set Weight:  50
        Analysis:
          Templates:
            Template Name:  cpu-rate
  Template:
    Metadata:
      Labels:
        App:  proj01
    Spec:
      Containers:
        Env From:
          Secret Ref:
            Name:           pg-secrets
        Image:              rvlq/project:50fe8b7b33b2c84ccb17a557317193f0862c7d8a
        Image Pull Policy:  IfNotPresent
        Liveness Probe:
          Failure Threshold:  5
          Http Get:
            Path:                            /healthz
            Port:                            9999
          Initial Delay Seconds:             20
          Period Seconds:                    10
          Termination Grace Period Seconds:  60
        Name:                                proj01
        Readiness Probe:
          Http Get:
            Path:                 /healthz
            Port:                 9999
          Initial Delay Seconds:  5
          Period Seconds:         10
        Resources:
          Limits:
            Cpu:     100m
            Memory:  128Mi
          Requests:
            Cpu:     20m
            Memory:  64Mi
        Volume Mounts:
          Mount Path:  /app/images
          Name:        shared-share
      Volumes:
        Name:  shared-share
        Persistent Volume Claim:
          Claim Name:  share-claim
Status:
  HPA Replicas:        4
  Available Replicas:  4
  Blue Green:
  Canary:
    Current Step Analysis Run Status:
      Name:    proj01-dep-745f85cffc-3-1
      Status:  Running
  Conditions:
    Last Transition Time:  2022-08-18T12:13:36Z
    Last Update Time:      2022-08-18T12:13:36Z
    Message:               RolloutCompleted
    Reason:                RolloutCompleted
    Status:                False
    Type:                  Completed
    Last Transition Time:  2022-08-18T12:40:20Z
    Last Update Time:      2022-08-18T12:40:20Z
    Message:               Rollout has minimum availability
    Reason:                AvailableReason
    Status:                True
    Type:                  Available
    Last Transition Time:  2022-08-18T12:40:00Z
    Last Update Time:      2022-08-18T12:40:20Z
    Message:               ReplicaSet "proj01-dep-745f85cffc" is progressing.
    Reason:                ReplicaSetUpdated
    Status:                True
    Type:                  Progressing
  Current Pod Hash:        745f85cffc
  Current Step Hash:       65977794d5
  Current Step Index:      1
  Message:                 more replicas need to be updated
  Observed Generation:     4
  Phase:                   Progressing
  Ready Replicas:          4
  Replicas:                4
  Selector:                app=proj01
  Stable RS:               758f7bdc88
  Updated Replicas:        2
Events:
  Type     Reason                Age                From                 Message
  ----     ------                ----               ----                 -------
  Normal   NewReplicaSetCreated  60m                rollouts-controller  Created ReplicaSet proj01-dep-758f7bdc88 (revision 1)
  Normal   ScalingReplicaSet     60m                rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 0 to 4
  Normal   RolloutCompleted      60m                rollouts-controller  Rollout completed update to revision 1 (758f7bdc88): Initial deploy
  Normal   RolloutUpdated        60m                rollouts-controller  Rollout updated to revision 1
  Normal   ScalingReplicaSet     27m                rollouts-controller  Scaled up ReplicaSet proj01-dep-768df8d8ff (revision 2) from 0 to 2
  Normal   NewReplicaSetCreated  27m                rollouts-controller  Created ReplicaSet proj01-dep-768df8d8ff (revision 2)
  Normal   RolloutUpdated        27m                rollouts-controller  Rollout updated to revision 2
  Normal   AnalysisRunRunning    26m                rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Running' Previous: ''
  Normal   ScalingReplicaSet     24m                rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 4
  Warning  AnalysisRunFailed     24m                rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Failed' Previous: 'Running'
  Warning  RolloutAborted        24m                rollouts-controller  Rollout aborted update to revision 2: Metric "cpu-rate" assessed Failed due to failed (1) > failureLimit (0)
  Normal   ScalingReplicaSet     24m                rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 2 to 1
  Normal   ScalingReplicaSet     24m                rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 2 to 3
  Normal   ScalingReplicaSet     24m                rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 1 to 0
  Normal   RolloutUpdated        52s                rollouts-controller  Rollout updated to revision 3
  Normal   ScalingReplicaSet     52s (x2 over 27m)  rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 4 to 3
  Normal   ScalingReplicaSet     52s                rollouts-controller  Scaled up ReplicaSet proj01-dep-745f85cffc (revision 3) from 0 to 2
  Normal   ScalingReplicaSet     31s (x2 over 26m)  rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 2
  Normal   RolloutStepCompleted  31s (x2 over 26m)  rollouts-controller  Rollout step 1/2 completed (setWeight: 50)
  Normal   AnalysisRunRunning    31s                rollouts-controller  Step Analysis Run 'proj01-dep-745f85cffc-3-1' Status New: 'Running' Previous: ''
rvl@eb: Project $ 
rvl@eb: Project $ 
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d18h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
daily-todo-27680400--1-fbxdz   0/1     Completed   0             47m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             41m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             41m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             41m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             41m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             7m26s
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             7m26s
proj01-dep-745f85cffc-jfg47    1/1     Running     0             5m5s
proj01-dep-745f85cffc-7qj25    1/1     Running     0             5m5s
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d18h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
daily-todo-27680400--1-fbxdz   0/1     Completed   0             50m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             44m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             44m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             44m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             44m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             10m
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             10m
proj01-dep-745f85cffc-jfg47    1/1     Running     0             8m10s
proj01-dep-745f85cffc-7qj25    1/1     Running     0             8m10s
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d18h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
daily-todo-27680400--1-fbxdz   0/1     Completed   0             50m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             44m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             44m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             44m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             44m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             10m
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             10m
proj01-dep-745f85cffc-jfg47    1/1     Running     0             8m20s
proj01-dep-745f85cffc-7qj25    1/1     Running     0             8m20s
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d18h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
daily-todo-27680400--1-fbxdz   0/1     Completed   0             51m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             45m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             45m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             45m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             45m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             11m
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             11m
proj01-dep-745f85cffc-jfg47    1/1     Running     0             9m10s
proj01-dep-745f85cffc-7qj25    1/1     Running     0             9m10s
rvl@eb: Project $ kubectl describe rollouts
Name:         proj02-dep
Namespace:    project
Labels:       <none>
Annotations:  rollout.argoproj.io/revision: 1
API Version:  argoproj.io/v1alpha1
Kind:         Rollout
Metadata:
  Creation Timestamp:  2022-08-18T12:06:14Z
  Generation:          1
  Managed Fields:
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:rollout.argoproj.io/revision:
    Manager:      Go-http-client
    Operation:    Update
    Time:         2022-08-18T12:06:14Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .:
          f:kubectl.kubernetes.io/last-applied-configuration:
      f:spec:
        .:
        f:replicas:
        f:selector:
          .:
          f:matchLabels:
            .:
            f:app:
        f:strategy:
          .:
          f:canary:
            .:
            f:steps:
        f:template:
          .:
          f:metadata:
            .:
            f:labels:
              .:
              f:app:
          f:spec:
            .:
            f:containers:
    Manager:      kubectl-client-side-apply
    Operation:    Update
    Time:         2022-08-18T12:06:14Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:status:
        .:
        f:HPAReplicas:
        f:availableReplicas:
        f:blueGreen:
        f:canary:
        f:conditions:
        f:currentPodHash:
        f:currentStepHash:
        f:currentStepIndex:
        f:observedGeneration:
        f:phase:
        f:readyReplicas:
        f:replicas:
        f:selector:
        f:stableRS:
        f:updatedReplicas:
    Manager:         Go-http-client
    Operation:       Update
    Subresource:     status
    Time:            2022-08-18T12:06:34Z
  Resource Version:  1282520
  UID:               df3656dd-97d3-4a22-87a9-f08c7bf757af
Spec:
  Replicas:  4
  Selector:
    Match Labels:
      App:  proj02
  Strategy:
    Canary:
      Steps:
        Set Weight:  25
        Pause:
          Duration:  30s
        Set Weight:  50
        Pause:
          Duration:  30s
  Template:
    Metadata:
      Labels:
        App:  proj02
    Spec:
      Containers:
        Image:              rvlq/proj-front:2bf3fbe6733021c07515c1e81792c1f60e151a7f
        Image Pull Policy:  Always
        Name:               proj02
        Readiness Probe:
          Http Get:
            Path:                 /
            Port:                 80
          Initial Delay Seconds:  5
          Period Seconds:         10
        Resources:
          Limits:
            Cpu:     500m
            Memory:  256Mi
Status:
  HPA Replicas:        4
  Available Replicas:  4
  Blue Green:
  Canary:
  Conditions:
    Last Transition Time:  2022-08-18T12:06:34Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               RolloutCompleted
    Reason:                RolloutCompleted
    Status:                True
    Type:                  Completed
    Last Transition Time:  2022-08-18T12:06:14Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               ReplicaSet "proj02-dep-cd996b9f6" has successfully progressed.
    Reason:                NewReplicaSetAvailable
    Status:                True
    Type:                  Progressing
    Last Transition Time:  2022-08-18T12:06:34Z
    Last Update Time:      2022-08-18T12:06:34Z
    Message:               Rollout has minimum availability
    Reason:                AvailableReason
    Status:                True
    Type:                  Available
  Current Pod Hash:        cd996b9f6
  Current Step Hash:       567497cc4f
  Current Step Index:      4
  Observed Generation:     1
  Phase:                   Healthy
  Ready Replicas:          4
  Replicas:                4
  Selector:                app=proj02
  Stable RS:               cd996b9f6
  Updated Replicas:        4
Events:
  Type    Reason                Age   From                 Message
  ----    ------                ----  ----                 -------
  Normal  RolloutUpdated        45m   rollouts-controller  Rollout updated to revision 1
  Normal  NewReplicaSetCreated  45m   rollouts-controller  Created ReplicaSet proj02-dep-cd996b9f6 (revision 1)
  Normal  ScalingReplicaSet     45m   rollouts-controller  Scaled up ReplicaSet proj02-dep-cd996b9f6 (revision 1) from 0 to 4
  Normal  RolloutCompleted      45m   rollouts-controller  Rollout completed update to revision 1 (cd996b9f6): Initial deploy


Name:         proj01-dep
Namespace:    project
Labels:       <none>
Annotations:  rollout.argoproj.io/revision: 3
API Version:  argoproj.io/v1alpha1
Kind:         Rollout
Metadata:
  Creation Timestamp:  2022-08-18T11:36:32Z
  Generation:          4
  Managed Fields:
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:rollout.argoproj.io/revision:
    Manager:      Go-http-client
    Operation:    Update
    Time:         2022-08-18T11:40:15Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .:
          f:kubectl.kubernetes.io/last-applied-configuration:
      f:spec:
        .:
        f:replicas:
        f:selector:
          .:
          f:matchLabels:
            .:
            f:app:
        f:strategy:
          .:
          f:canary:
            .:
            f:steps:
        f:template:
          .:
          f:metadata:
            .:
            f:labels:
              .:
              f:app:
          f:spec:
            .:
            f:containers:
            f:volumes:
    Manager:      kubectl-client-side-apply
    Operation:    Update
    Time:         2022-08-18T11:40:15Z
    API Version:  argoproj.io/v1alpha1
    Fields Type:  FieldsV1
    fieldsV1:
      f:status:
        .:
        f:HPAReplicas:
        f:availableReplicas:
        f:blueGreen:
        f:canary:
        f:conditions:
        f:currentPodHash:
        f:currentStepHash:
        f:currentStepIndex:
        f:observedGeneration:
        f:phase:
        f:readyReplicas:
        f:replicas:
        f:selector:
        f:stableRS:
        f:updatedReplicas:
    Manager:         Go-http-client
    Operation:       Update
    Subresource:     status
    Time:            2022-08-18T12:42:30Z
  Resource Version:  1284829
  UID:               379b830b-6f63-4fec-b985-616b8ab6b7c8
Spec:
  Replicas:  4
  Selector:
    Match Labels:
      App:  proj01
  Strategy:
    Canary:
      Steps:
        Set Weight:  50
        Analysis:
          Templates:
            Template Name:  cpu-rate
  Template:
    Metadata:
      Labels:
        App:  proj01
    Spec:
      Containers:
        Env From:
          Secret Ref:
            Name:           pg-secrets
        Image:              rvlq/project:50fe8b7b33b2c84ccb17a557317193f0862c7d8a
        Image Pull Policy:  IfNotPresent
        Liveness Probe:
          Failure Threshold:  5
          Http Get:
            Path:                            /healthz
            Port:                            9999
          Initial Delay Seconds:             20
          Period Seconds:                    10
          Termination Grace Period Seconds:  60
        Name:                                proj01
        Readiness Probe:
          Http Get:
            Path:                 /healthz
            Port:                 9999
          Initial Delay Seconds:  5
          Period Seconds:         10
        Resources:
          Limits:
            Cpu:     100m
            Memory:  128Mi
          Requests:
            Cpu:     20m
            Memory:  64Mi
        Volume Mounts:
          Mount Path:  /app/images
          Name:        shared-share
      Volumes:
        Name:  shared-share
        Persistent Volume Claim:
          Claim Name:  share-claim
Status:
  HPA Replicas:        4
  Available Replicas:  4
  Blue Green:
  Canary:
  Conditions:
    Last Transition Time:  2022-08-18T12:42:30Z
    Last Update Time:      2022-08-18T12:42:30Z
    Message:               Rollout has minimum availability
    Reason:                AvailableReason
    Status:                True
    Type:                  Available
    Last Transition Time:  2022-08-18T12:42:30Z
    Last Update Time:      2022-08-18T12:42:30Z
    Message:               RolloutCompleted
    Reason:                RolloutCompleted
    Status:                True
    Type:                  Completed
    Last Transition Time:  2022-08-18T12:40:00Z
    Last Update Time:      2022-08-18T12:42:30Z
    Message:               ReplicaSet "proj01-dep-745f85cffc" has successfully progressed.
    Reason:                NewReplicaSetAvailable
    Status:                True
    Type:                  Progressing
  Current Pod Hash:        745f85cffc
  Current Step Hash:       65977794d5
  Current Step Index:      2
  Observed Generation:     4
  Phase:                   Healthy
  Ready Replicas:          4
  Replicas:                4
  Selector:                app=proj01
  Stable RS:               745f85cffc
  Updated Replicas:        4
Events:
  Type     Reason                 Age                From                 Message
  ----     ------                 ----               ----                 -------
  Normal   NewReplicaSetCreated   37m                rollouts-controller  Created ReplicaSet proj01-dep-768df8d8ff (revision 2)
  Normal   ScalingReplicaSet      37m                rollouts-controller  Scaled up ReplicaSet proj01-dep-768df8d8ff (revision 2) from 0 to 2
  Normal   RolloutUpdated         37m                rollouts-controller  Rollout updated to revision 2
  Normal   AnalysisRunRunning     37m                rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Running' Previous: ''
  Normal   ScalingReplicaSet      35m                rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 2 to 3
  Warning  AnalysisRunFailed      35m                rollouts-controller  Step Analysis Run 'proj01-dep-768df8d8ff-2-1' Status New: 'Failed' Previous: 'Running'
  Normal   ScalingReplicaSet      35m                rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 2 to 1
  Normal   ScalingReplicaSet      35m                rollouts-controller  Scaled up ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 4
  Warning  RolloutAborted         35m                rollouts-controller  Rollout aborted update to revision 2: Metric "cpu-rate" assessed Failed due to failed (1) > failureLimit (0)
  Normal   ScalingReplicaSet      35m                rollouts-controller  Scaled down ReplicaSet proj01-dep-768df8d8ff (revision 2) from 1 to 0
  Normal   ScalingReplicaSet      11m                rollouts-controller  Scaled up ReplicaSet proj01-dep-745f85cffc (revision 3) from 0 to 2
  Normal   RolloutUpdated         11m                rollouts-controller  Rollout updated to revision 3
  Normal   ScalingReplicaSet      11m (x2 over 37m)  rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 4 to 3
  Normal   ScalingReplicaSet      11m (x2 over 37m)  rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 3 to 2
  Normal   RolloutStepCompleted   11m (x2 over 37m)  rollouts-controller  Rollout step 1/2 completed (setWeight: 50)
  Normal   AnalysisRunRunning     11m                rollouts-controller  Step Analysis Run 'proj01-dep-745f85cffc-3-1' Status New: 'Running' Previous: ''
  Normal   AnalysisRunSuccessful  9m12s              rollouts-controller  Step Analysis Run 'proj01-dep-745f85cffc-3-1' Status New: 'Successful' Previous: 'Running'
  Normal   RolloutStepCompleted   9m12s              rollouts-controller  Rollout step 2/2 completed (analysis)
  Normal   ScalingReplicaSet      9m12s              rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 2 to 1
  Normal   ScalingReplicaSet      9m12s              rollouts-controller  Scaled up ReplicaSet proj01-dep-745f85cffc (revision 3) from 2 to 4
  Normal   ScalingReplicaSet      9m2s               rollouts-controller  Scaled down ReplicaSet proj01-dep-758f7bdc88 (revision 1) from 1 to 0
  Normal   RolloutCompleted       9m2s               rollouts-controller  Rollout completed update to revision 3 (745f85cffc): Completed all 2 canary steps
rvl@eb: Project $ kubectl get pods
NAME                           READY   STATUS      RESTARTS      AGE
daily-todo-27677520--1-hblfd   0/1     Completed   2             2d
postgres-ss-0                  1/1     Running     2 (42h ago)   2d18h
daily-todo-27678960--1-s4w2l   0/1     Completed   0             24h
daily-todo-27680400--1-fbxdz   0/1     Completed   0             52m
proj02-dep-cd996b9f6-pqbk5     1/1     Running     0             46m
proj02-dep-cd996b9f6-7tvkx     1/1     Running     0             46m
proj02-dep-cd996b9f6-gcpd7     1/1     Running     0             46m
proj02-dep-cd996b9f6-ljdtp     1/1     Running     0             46m
proj01-dep-745f85cffc-cl9ff    1/1     Running     0             12m
proj01-dep-745f85cffc-cgnvd    1/1     Running     0             12m
proj01-dep-745f85cffc-jfg47    1/1     Running     0             10m
proj01-dep-745f85cffc-7qj25    1/1     Running     0             10m
rvl@eb: Project $ 


